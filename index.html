<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color By Birth</title>
    <style>
        body{
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            background-color: hsl(216, 48%, 8%);
            color: rgb(78, 241, 187);
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-weight: 100;
        }
        header{
            text-align: center;
        }
        main{
            display: flex;
            flex-grow: 0;
            flex-shrink: 0;
            flex-wrap: wrap;
            gap: 0.5rem;
            width: 90%;
            justify-content: center;
            margin: 0 auto;
        }
        .box{
            --size: 100px;
            width: var(--size);
            height: var(--size);
            /* background-color: rgb(82, 79, 73); */
            border: 1px solid #0dd1c163;
            display: flex;
            flex-grow: 0;
            flex-shrink: 0;
            justify-content: center;
            align-items: flex-end;
            padding: 0;
            border-radius: 0.5rem;
            transition: box-shadow 0.2s ease-in-out;
        }
        .box:hover{
            box-shadow: 0px 0px 1rem rgb(78, 241, 187);
            cursor: pointer;
        }
        .tag{
            background-color: black;
            padding: 0;
            margin: 2px;
            padding: 0.25rem;
            font-size: 0.8rem;
            border-radius: 0.5rem;
            color: #fff;

        }
        input{
            padding: 20px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Color By Birth</h1>
        <h3>Find out what color represents your birthdate</h3>
    <form action="#">
        <input type="date" id="date">
        <input type="submit" value="Calculate" id="submit" onclick="findColor()">
    </form>
    
    <h2>Entries</h1>
    </header>
    <main id="main">
        <!-- <div class="box" style="background-color: red;">
            <p class="tag" >05/04/94</p>
        </div>
         -->
    </main>
</body>
<script>
const MAIN = document.getElementById("main")
let date = document.getElementById("date");
const submit = document.getElementById("submit");
let birthDate;
let birthYear;
let birthMonth;
let birthDay;
let lastEntry;
const currDate = new Date();
const currYear = currDate.getFullYear();
function dayOfYear(year, month, day) {
 
  const date = new Date(year, month - 1, day);
  const start = new Date(year, 0, 1);
  
  const diffInMs = date - start;
  const oneDay = 1000 * 60 * 60 * 24;
  
  return Math.floor(diffInMs / oneDay) + 1;
}


function findColor(){
    birthDate = date.value;
    birthYear = parseInt(`${birthDate[0]}${birthDate[1]}${birthDate[2]}${birthDate[3]}`);
    birthMonth = parseInt(`${birthDate[5]}${birthDate[6]}`);
    birthDay = parseInt(`${birthDate[8]}${birthDate[9]}`) ;
    let age = parseInt(currYear - birthYear);
    
   lastEntry = dayOfYear(birthYear, birthMonth, birthDay);
   console.log(lastEntry);
   
   renderNewEntry(lastEntry, age);
}

function renderNewEntry(dayOfYear,age){
    let hue = dayOfYear;
    let sat = 100-age;
    if(age > 100){
        sat = 0;
    }
    if(hue > 360){
        hue = 360;
    }
    const newBox = document.createElement('div');
    
    let color = `hsl(${parseInt(hue)}, ${sat}%, 50%)`;
   
    newBox.style.backgroundColor = color;
    // newBox.style.boxShadow = `0px 0px 1rem ${color}`;    
    newBox.classList.add("box");

    const birthTag = document.createElement('p');
    birthTag.classList.add("tag");
    birthTag.innerText = `${birthDay}/${birthMonth}/${birthYear}`;


    console.log(newBox);
    MAIN.appendChild(newBox);
    newBox.appendChild(birthTag);
}
// Examples
 // 95 (non-leap year)
console.log(dayOfYear(2024, 4, 5)); // 96 (leap year)
</script>
</html>